aW1wb3J0IHJlcXVlc3Rz
ZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybGpvaW4sIHVybHBhcnNlLCBwYXJzZV9xcw
ZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXA
ZnJvbSBjb2xvcmFtYSBpbXBvcnQgaW5pdCwgRm9yZSwgU3R5bGU
aW1wb3J0IHJl

IyBJbmlzaWFsaXNhc2kgY29sb3JhbWE
aW5pdChhdXRvcmVzZXQ9VHJ1ZSk

ZGVmIGlzX3ZhbGlkKHVybCk6
ICAgICIiIg
ICAgIE1lbWVyaWtzYSBhcGFrYWggVVJMIHZhbGlkIChtZW1pbGlraSBza2VtYSBkYW4gZG9tYWluKS4
ICAgICIiIg
ICAgIHBhcnNlZCA9IHVybHBhcnNlKHVybCk
ICAgIHJldHVybiBib29sKHBhcnNlZC5uZXRsb2MpIGFuZCBib29sKHBhcnNlZC5zY2hlbWUp

ZGVmIGdldF9hbGxfbGlua3ModXJsKTo
ICAgICIiIg
ICAgIE1lbmdhbWJpbCBzZW11YSBsaW5rIGhhbGFtYW4geWFuZyBtZW5nYW5kdW5nICdwaHA_aWQ9JyBkYXJpIFVSTCB5YW5nIGRpYmVyaWthbi4
ICAgIFBlbmNhcmlhbiBkaXBlcmx1YXMga2Ugc2VsdXJ1aCB0ZWtzIGhhbGFtYW4gZGFuIGF0cmlidXQgbGFpbi4
ICAgICIiIg
ICAgIHByaW50KEZvcmUuWUVMTE9XICsgIlsqXSBTZWFyY2hpbmcgZm9yIHBocD9pZD0gbGlua3MuLi4iICsgU3R5bGUuUkVTRVRfQUxMKQ
ICAgIHVybHMgPSBzZXQoKQ
ICAgIGRvbWFpbl9uYW1lID0gdXJscGFyc2UodXJsKS5uZXRsb2M

ICAgIHRyeTo
ICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwsIHRpbWVvdXQ9MTAp
ICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCk
ICAgICAgICBzb3VwID0gQmVhdXRpZnVsU291cChyZXNwb25zZS50ZXh0LCAiaHRtbC5wYXJzZXIiKQ
ICAgIGV4Y2VwdCByZXF1ZXN0cy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6
ICAgICAgICBwcmludChGb3JlLlJFRCArIGYiWyFdIEVycm9yIHNhYXQgbWVuZ2Frc2VzIHt1cmx9OiB7ZX0iICsgU3R5bGUuUkVTRVRfQUxMKQ
ICAgICAgICByZXR1cm4gdXJscw

ICAgICMgMS4gQ2FyaSBsaW5rIGRpIHRhZyA8YT4
ICAgIGZvciBhX3RhZyBpbiBzb3VwLmZpbmRfYWxsKCJhIik6
ICAgICAgICBocmVmID0gYV90YWcuYXR0cnMuZ2V0KCJocmVmIik
ICAgICAgICBpZiBub3QgaHJlZjo
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBocmVmID0gdXJsam9pbih1cmwsIGhyZWYp
ICAgICAgICBwYXJzZWRfaHJlZiA9IHVybHBhcnNlKGhyZWYp

ICAgICAgICBpZiBub3QgaXNfdmFsaWQoaHJlZik6
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBpZiBkb21haW5fbmFtZSBub3QgaW4gcGFyc2VkX2hyZWYubmV0bG9jOg
ICAgICAgICAgICAgY29udGludWU

ICAgICAgICAjIENlayBhcGFrYWggcGF0aCBiZXJha2hpcmFuIC5waHAgZGFuIHF1ZXJ5IHN0cmluZyBtZW5nYW5kdW5nIHBhcmFtZXRlciAnaWQn
ICAgICAgICBpZiBwYXJzZWRfaHJlZi5wYXRoLmVuZHN3aXRoKCIucGhwIik6
ICAgICAgICAgICAgcXVlcnlfcGFyYW1zID0gcGFyc2VfcXMocGFyc2VkX2hyZWYucXVlcnkp
ICAgICAgICAgICAgaWYgJ2lkJyBpbiBxdWVyeV9wYXJhbXM6
ICAgICAgICAgICAgICAgIGZ1bGxfdXJsID0gcGFyc2VkX2hyZWYuc2NoZW1lICsgIjovLyIgKyBwYXJzZWRfaHJlZi5uZXRsb2MgKyBwYXJzZWRfaHJlZi5wYXRoICsgIj8iICsgcGFyc2VkX2hyZWYucXVlcnk
ICAgICAgICAgICAgICAgIHVybHMuYWRkKGZ1bGxfdXJsKQ

ICAgICMgMi4gQ2FyaSBsaW5rIGRpIGF0cmlidXQgbGFpbiB5YW5nIG11bmdraW4gbWVuZ2FuZHVuZyBVUkwgZGVuZ2FuIHBocD9pZD0
ICAgICMgQ29udG9oOiBvbmNsaWNrPSJsb2NhdGlvbi5ocmVmPSdwYWdlLnBocD9pZD0xMjMnIg
ICAgICMgQ2FyaSBzZW11YSBhdHJpYnV0IHlhbmcgbWVuZ2FuZHVuZyAncGhwP2lkPScgbWVuZ2d1bmFrYW4gcmVnZXg
ICAgIHBhdHRlcm4gPSByZS5jb21waWxlKHIiKGh0dHBzPzovL1teXHMnXCI8Pl0rcGhwXD9bXidcIjw-XSppZD1bXidcIjw-XSt8W15ccydcIjw-XStwaHBcP1teJ1wiPD5dKmlkPVteJ1wiPD5dKykiLCByZS5JR05PUkVDQVNFKQ
ICAgIG1hdGNoZXMgPSBwYXR0ZXJuLmZpbmRhbGwocmVzcG9uc2UudGV4dCk
ICAgIGZvciBtYXRjaCBpbiBtYXRjaGVzOg
ICAgICAgICAjIEppa2EgbGluayByZWxhdGlmLCBnYWJ1bmdrYW4gZGVuZ2FuIGJhc2UgdXJs
ICAgICAgICBmdWxsX2xpbmsgPSB1cmxqb2luKHVybCwgbWF0Y2gp
ICAgICAgICBwYXJzZWRfbGluayA9IHVybHBhcnNlKGZ1bGxfbGluayk
ICAgICAgICBpZiBub3QgaXNfdmFsaWQoZnVsbF9saW5rKTo
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBpZiBkb21haW5fbmFtZSBub3QgaW4gcGFyc2VkX2xpbmsubmV0bG9jOg
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICB1cmxzLmFkZChmdWxsX2xpbmsp

ICAgICMgMy4gQ2FyaSBsaW5rIGRpIGZvcm0gYWN0aW9uIHlhbmcgbWVuZ2FuZHVuZyBwaHA_aWQ9
ICAgIGZvciBmb3JtIGluIHNvdXAuZmluZF9hbGwoImZvcm0iKTo
ICAgICAgICBhY3Rpb24gPSBmb3JtLmF0dHJzLmdldCgiYWN0aW9uIik
ICAgICAgICBpZiBub3QgYWN0aW9uOg
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBhY3Rpb24gPSB1cmxqb2luKHVybCwgYWN0aW9uKQ
ICAgICAgICBwYXJzZWRfYWN0aW9uID0gdXJscGFyc2UoYWN0aW9uKQ
ICAgICAgICBpZiBub3QgaXNfdmFsaWQoYWN0aW9uKTo
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBpZiBkb21haW5fbmFtZSBub3QgaW4gcGFyc2VkX2FjdGlvbi5uZXRsb2M6
ICAgICAgICAgICAgY29udGludWU
ICAgICAgICBpZiBwYXJzZWRfYWN0aW9uLnBhdGguZW5kc3dpdGgoIi5waHAiKTo
ICAgICAgICAgICAgcXVlcnlfcGFyYW1zID0gcGFyc2VfcXMocGFyc2VkX2FjdGlvbi5xdWVyeSk
ICAgICAgICAgICAgaWYgJ2lkJyBpbiBxdWVyeV9wYXJhbXM6
ICAgICAgICAgICAgICAgIHVybHMuYWRkKGFjdGlvbik

ICAgIHByaW50KEZvcmUuR1JFRU4gKyBmIlsrXSBGb3VuZCB7bGVuKHVybHMpfSBwaHA_aWQ9IGxpbmtzLiIgKyBTdHlsZS5SRVNFVF9BTEwp
ICAgIHJldHVybiB1cmxz

ZGVmIGZpbmRfYWRtaW5fbG9naW5fcGFnZXMoYmFzZV91cmwpOg
ICAgICIiIg
ICAgIE1lbmNhcmkgaGFsYW1hbiBsb2dpbiBhZG1pbiB5YW5nIHVtdW0gcGFkYSBkb21haW4geWFuZyBzYW1hLg
ICAgIE1lbmdlbWJhbGlrYW4gc2V0IFVSTCB5YW5nIGFrdGlmIChzdGF0dXMgMjAwKS4
ICAgICIiIg
ICAgIGNvbW1vbl9hZG1pbl9wYXRocyA9IFs
ICAgICAgICAiYWRtaW4vIiw
ICAgICAgICAiYWRtaW5pc3RyYXRvci8iLA
ICAgICAgICAiYWRtaW4ucGhwIiw
ICAgICAgICAiYWRtaW4uaHRtbCIs
ICAgICAgICAibG9naW4vIiw
ICAgICAgICAibG9naW4ucGhwIiw
ICAgICAgICAibG9naW4uaHRtbCIs
ICAgICAgICAidXNlci9sb2dpbiIs
ICAgICAgICAid3AtbG9naW4ucGhwIiw
ICAgICAgICAiY3BhbmVsLyIs
ICAgICAgICAiYWRtaW5wYW5lbC8iLA
ICAgICAgICAiYWRtaW5hcmVhLyIs
ICAgICAgICAiYWRtaW5fbG9naW4ucGhwIiw
ICAgICAgICAiYWRtaW4xLnBocCIs
ICAgICAgICAiYWRtaW4yLnBocCIs
ICAgICAgICAiYWRtaW4zLnBocCIs
ICAgICAgICAiYWRtaW40LnBocCIs
ICAgICAgICAiYWRtaW41LnBocCIs
ICAgICAgICAiYWRtaW4tbG9naW4ucGhwIiw
ICAgICAgICAiYWRtaW5fYXJlYS8iLA
ICAgICAgICAicGFuZWwtYWRtaW5pc3RyYWNpb24vIiw
ICAgICAgICAiaW5zdGFkbWluLyIs
ICAgICAgICAibWVtYmVyYWRtaW4vIiw
ICAgICAgICAiYWRtaW5pc3RyYXRvcmxvZ2luLyIs
ICAgICAgICAiYWRtLyIs
ICAgICAgICAiYWRtaW4vYWNjb3VudC5waHAiLA
ICAgICAgICAiYWRtaW4vaW5kZXgucGhwIiw
ICAgICAgICAiYWRtaW4vbG9naW4uaHRtbCIs
ICAgICAgICAiYWRtaW4vYWRtaW5fbG9naW4uaHRtbCIs
ICAgICAgICAiYWRtaW5fbG9naW4uaHRtbCIs
ICAgICAgICAiYWRtaW4vYWRtaW4uaHRtbCIs
ICAgIF0

ICAgIGZvdW5kX2FkbWluX3BhZ2VzID0gc2V0KCk
ICAgIGRvbWFpbl9uYW1lID0gdXJscGFyc2UoYmFzZV91cmwpLm5ldGxvYw
ICAgIHNjaGVtZSA9IHVybHBhcnNlKGJhc2VfdXJsKS5zY2hlbWU

ICAgIGZvciBwYXRoIGluIGNvbW1vbl9hZG1pbl9wYXRoczo
ICAgICAgICB1cmwgPSBmIntzY2hlbWV9Oi8ve2RvbWFpbl9uYW1lfS97cGF0aH0i
ICAgICAgICB0cnk6
ICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLCB0aW1lb3V0PTUsIGFsbG93X3JlZGlyZWN0cz1UcnVlKQ
ICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOg
ICAgICAgICAgICAgICAgIGNvbnRlbnRfbG93ZXIgPSByZXNwb25zZS50ZXh0Lmxvd2VyKCk
ICAgICAgICAgICAgICAgIGlmIGFueShrZXl3b3JkIGluIGNvbnRlbnRfbG93ZXIgZm9yIGtleXdvcmQgaW4gWyJsb2dpbiIsICJwYXNzd29yZCIsICJ1c2VybmFtZSJdKTo
ICAgICAgICAgICAgICAgICAgICBmb3VuZF9hZG1pbl9wYWdlcy5hZGQodXJsKQ
ICAgICAgICBleGNlcHQgcmVxdWVzdHMuUmVxdWVzdEV4Y2VwdGlvbjo
ICAgICAgICAgICAgY29udGludWU

ICAgIHJldHVybiBmb3VuZF9hZG1pbl9wYWdlcw

ZGVmIHByaW50X2NvbG9yZnVsX2FzY2lpKCk6
ICAgIGFzY2lpX2FydCA9IFs
ICAgICAgICAjIEJpc2EgZGl0YW1iYWhrYW4gQVNDSUkgYXJ0IGppa2EgaW5naW4
ICAgIF0
ICAgIGNvbG9ycyA9IFtGb3JlLlJFRCwgRm9yZS5HUkVFTiwgRm9yZS5ZRUxMT1csIEZvcmUuQ1lBTiwgRm9yZS5NQUdFTlRBXQ

ICAgIGZvciBsaW5lLCBjb2xvciBpbiB6aXAoYXNjaWlfYXJ0LCBjb2xvcnMpOg
ICAgICAgICBwcmludChjb2xvciArIGxpbmUgKyBTdHlsZS5SRVNFVF9BTEwp

aWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjo

ICAgIHByaW50X2NvbG9yZnVsX2FzY2lpKCk
ICAgIHByaW50KEZvcmUuWUVMTE9XICsgIkNyZWF0b3I6IFlldGFIdWJYcG9pbHQiKQ
ICAgIHByaW50KEZvcmUuWUVMTE9XICsgIkdpdGh1YjogaHR0cHM6Ly9naXRodWIuY29tL3lldGF6eXl5Iik
ICAgIHByaW50KEZvcmUuWUVMTE9XICsgIlNjcmlwdCBjcmVhdGlvbiBkYXRlOiA2LzkvMjAyNSIp
ICAgIHByaW50KEZvcmUuUkVEICsgIlNjcmlwdDogRXh0cmFjdCBMaW5rcyB8ICBsaWtlIERIIEhhY2tiYXIgIiArIFN0eWxlLlJFU0VUX0FMTCk
ICAgIHByaW50KEZvcmUuUkVEICsgIk5vdGU6IENvbWluZyBTb29uID0gUHVibGljIiArIFN0eWxlLlJFU0VUX0FMTCk
ICAgIHByaW50KEZvcmUuWUVMTE9XICsgIlxuUGFnZSBsaW5rcyB8IEFkbWluIFBhZ2UgTG9naW5cbiIp

ICAgIHdoaWxlIFRydWU6
ICAgICAgICB0YXJnZXRfdXJsID0gaW5wdXQoIkVudGVyIFdlYnNpdGUgVVJMIHwgIHR5cGUgJ0V4aXQnICB0byBnbyBvdXQgOiAiKS5zdHJpcCgp
ICAgICAgICBpZiB0YXJnZXRfdXJsLmxvd2VyKCkgaW4gKCJleGl0IiwgInF1aXQiKTo
ICAgICAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiRXhpdCB0aGUgcHJvZ3JhbS4gVGhhbmsgeW91IHwgU2VlIHlvdSBsYXRlciIgKyBTdHlsZS5SRVNFVF9BTEwp
ICAgICAgICAgICAgYnJlYWs

ICAgICAgICBpZiBub3QgdGFyZ2V0X3VybC5zdGFydHN3aXRoKCgiaHR0cDovLyIsICJodHRwczovLyIpKTo
ICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAiVGhlIFVSTCBtdXN0IGJlZ2luIHdpdGggaHR0cDovLyBvciBodHRwczovLyIgKyBTdHlsZS5SRVNFVF9BTEwp
ICAgICAgICAgICAgY29udGludWU

ICAgICAgICBwYWdlX2xpbmtzID0gZ2V0X2FsbF9saW5rcyh0YXJnZXRfdXJsKQ
ICAgICAgICBwcmludChGb3JlLllFTExPVyArICJbKl0gU2VhcmNoaW5nIGZvciBhZG1pbiBsb2dpbiBwYWdlcy4uLiIgKyBTdHlsZS5SRVNFVF9BTEwp
ICAgICAgICBhZG1pbl9wYWdlcyA9IGZpbmRfYWRtaW5fbG9naW5fcGFnZXModGFyZ2V0X3VybCk
ICAgICAgICBwcmludChGb3JlLkdSRUVOICsgZiJbK10gRm91bmQge2xlbihhZG1pbl9wYWdlcyl9IGFkbWluIGxvZ2luIHBhZ2VzLiIgKyBTdHlsZS5SRVNFVF9BTEwp

ICAgICAgICBwcmludCgiXG4tLS1QYWdlIExpbmtzIGNvbnRhaW5pbmcgcGhwP2lkPS0tLSIp
ICAgICAgICBpZiBwYWdlX2xpbmtzOg
ICAgICAgICAgICAgZm9yIGksIGxpbmsgaW4gZW51bWVyYXRlKHNvcnRlZChwYWdlX2xpbmtzKSwgMSk6
ICAgICAgICAgICAgICAgIHByaW50KEZvcmUuR1JFRU4gKyBmIntpfS4ge2xpbmt9IiArIFN0eWxlLlJFU0VUX0FMTCk
ICAgICAgICBlbHNlOg
ICAgICAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiTm8gbGluayBmb3VuZCBjb250YWluaW5nIHBocD9pZD0iICsgU3R5bGUuUkVTRVRfQUxMKQ

ICAgICAgICBwcmludCgiXG4tLS1BZG1pbiBMb2dpbiBQYWdlcyBGb3VuZC0tLSIp
ICAgICAgICBpZiBhZG1pbl9wYWdlczo
ICAgICAgICAgICAgZm9yIGksIGxpbmsgaW4gZW51bWVyYXRlKHNvcnRlZChhZG1pbl9wYWdlcyksIDEpOg
ICAgICAgICAgICAgICAgIHByaW50KEZvcmUuTUFHRU5UQSArIGYie2l9LiB7bGlua30iICsgU3R5bGUuUkVTRVRfQUxMKQ
ICAgICAgICBlbHNlOg
ICAgICAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAiTm8gYWN0aXZlIGFkbWluIGxvZ2luIHBhZ2VzIGZvdW5kLiIgKyBTdHlsZS5SRVNFVF9BTEwp

ICAgICAgICBwcmludCgiXG4iKSAgIyBUYW1iYWggYmFyaXMga29zb25nIHNlYmVsdW0gaW5wdXQgYmVyaWt1dG55YQ
ICAgICAgICA
